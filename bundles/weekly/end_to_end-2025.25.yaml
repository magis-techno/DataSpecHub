# Bundle快照 - 硬约束版本锁定
# 目的：从软约束Consumer配置生成硬约束的数据快照，确保下游可重现

meta:
  bundle_name: end_to_end
  bundle_version: 2025.25        # 年.周数
  bundle_type: weekly            # weekly/snapshot/release
  created_at: "2025-06-20T14:30:00Z"
  created_by: bundle_generator
  source_consumer: end_to_end
  consumer_version: "1.2.0"
  description: "端到端网络数据快照 - 2025年第25周"

# 来源信息 - 追溯性
source_consumer: consumers/end_to_end/latest.yaml
snapshot_time: "2025-06-20T14:30:00Z"

# 硬约束通道配置 - 核心内容
channels:
  - channel: image_original
    version: "1.2.0"                    # 精确版本，不再是范围
    locked_at: "2025-06-20T14:30:00Z"   # 锁定时间
    required: true
    source_constraint: "1.2.0"          # 原Consumer中的约束
    spec_file: "channels/image_original/spec-1.2.0.yaml"
    
  - channel: object_array_fusion_infer  
    version: "1.2.0"                    # 从 ">=1.2.0" 解析出的具体版本
    locked_at: "2025-06-20T14:30:00Z"
    required: true
    source_constraint: ">=1.2.0"
    spec_file: "channels/object_array_fusion_infer/spec-1.2.0.yaml"
    
  - channel: occupancy
    version: "1.0.0"
    locked_at: "2025-06-20T14:30:00Z"
    required: true  
    source_constraint: "1.0.0"
    spec_file: "channels/occupancy/spec-1.0.0.yaml"
    
  - channel: utils_slam
    version: "1.1.0"                    # 从 ">=1.0.0" 解析出的最新版本
    locked_at: "2025-06-20T14:30:00Z"
    required: true
    source_constraint: ">=1.0.0"
    spec_file: "channels/utils_slam/spec-1.1.0.yaml"

# 完整性验证
integrity_hash: "a1b2c3d4e5f6g7h8"     # 基于通道版本组合的哈希值

# 使用说明 - 简化
usage:
  description: "端到端网络训练/测试的固定数据版本"
  target_scenarios: ["e2e_training", "e2e_testing"]
  load_command: "dataspec load --bundle bundles/weekly/end_to_end-2025.25.yaml" 