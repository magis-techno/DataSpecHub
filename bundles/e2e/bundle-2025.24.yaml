meta:
  bundle: e2e
  version: '2025.24'
  owner: 'e2e-team@company.com'
  description: "端到端测试数据集 - 2025年第24周快照"
  created_from: consumers/autonomous_driving.yaml  # 来源Consumer配置
  snapshot_date: '2025-06-15T10:30:00Z'
  
# 版本解析结果 - 从Consumer的范围约束解析出的具体版本
resolved_versions:
  img_cam1: '1.2.3'        # 从 ">=1.0.0 <2.0.0" 解析出的最新稳定版
  lidar: '2.1.0'           # 从 ">=1.0.0" 解析出的最新版本
  radar.v2: '2.0.5'        # 从 "^2.0.0" 解析出的兼容版本
  radar.v1: '1.0.0'        # 作为radar.v2的fallback保留
  utils: '1.3.2'           # 从 ">=1.0.0" 解析出的版本
  ego_pose: '1.1.0'        # 新增的定位数据
  
# 硬锁定的通道配置 - 不可变快照
channels:
  # 核心传感器数据
  - channel: img_cam1
    version: '1.2.3'
    locked_at: '2025-06-15T10:30:00Z'
    source_commit: 'a1b2c3d4'
    data_path: '/data/e2e-2025-24/img_cam1'
    sample_count: 25000
    quality_score: 0.98
    priority: critical
    
  - channel: lidar
    version: '2.1.0'
    locked_at: '2025-06-15T10:30:00Z'
    source_commit: 'e5f6g7h8'
    data_path: '/data/e2e-2025-24/lidar'
    sample_count: 25000
    quality_score: 0.96
    priority: critical
    
  # 雷达数据 - 版本共存示例
  - channel: radar.v2
    version: '2.0.5'
    locked_at: '2025-06-15T10:30:00Z'
    source_commit: 'i9j0k1l2'
    data_path: '/data/e2e-2025-24/radar_v2'
    sample_count: 20000
    quality_score: 0.94
    priority: high
    
  - channel: radar.v1
    version: '1.0.0'
    locked_at: '2025-06-15T10:30:00Z'
    source_commit: 'm3n4o5p6'
    data_path: '/data/e2e-2025-24/radar_v1'
    sample_count: 5000  # 作为fallback的少量数据
    quality_score: 0.90
    priority: medium
    usage: fallback  # 标记为fallback用途
    
  # 定位数据
  - channel: utils
    version: '1.3.2'
    locked_at: '2025-06-15T10:30:00Z'
    source_commit: 'q7r8s9t0'
    data_path: '/data/e2e-2025-24/utils'
    sample_count: 25000
    quality_score: 0.99
    priority: critical
    
  - channel: ego_pose
    version: '1.1.0'
    locked_at: '2025-06-15T10:30:00Z'
    source_commit: 'u1v2w3x4'
    data_path: '/data/e2e-2025-24/ego_pose'
    sample_count: 25000
    quality_score: 0.97
    priority: critical

# 版本共存管理
coexistence:
  - name: "radar_transition"
    channels: [radar.v1, radar.v2]
    strategy: parallel  # 并行共存策略
    primary: radar.v2   # 主要使用版本
    fallback: radar.v1  # 备用版本
    migration_deadline: '2025-12-01'
    migration_plan: "radar.v1将在2025年底完全退役"
    
# 兼容性验证结果
compatibility_matrix:
  validated_at: '2025-06-15T10:30:00Z'
  validation_passed: true
  all_compatible: true
  warnings:
    - message: "radar.v1 is deprecated, consider migration to radar.v2"
      severity: low
      affected_channels: [radar.v1]
  compatibility_checks:
    - check: "schema_compatibility"
      status: passed
    - check: "data_format_consistency"  
      status: passed
    - check: "version_constraints"
      status: passed

# Bundle统计信息
statistics:
  total_channels: 6
  total_samples: 125000
  total_size: "3.2TB"
  compression_ratio: 0.35
  creation_time: "2h 45m"
  
# 质量报告
quality_report:
  overall_score: 0.96
  validation_passed: true
  quality_gates:
    - gate: "minimum_samples"
      threshold: 1000
      actual: 5000  # 最少的是radar.v1的5000个样本
      status: passed
    - gate: "quality_threshold"
      threshold: 0.90
      actual: 0.96
      status: passed
    - gate: "compatibility_check"
      status: passed
      
# 使用场景和说明
usage_scenarios:
  - name: "e2e_testing"
    description: "端到端自动驾驶算法测试"
    required_channels: [img_cam1, lidar, radar.v2, utils, ego_pose]
    optional_channels: [radar.v1]
    
  - name: "radar_comparison"
    description: "雷达v1和v2的对比实验"
    required_channels: [radar.v1, radar.v2, utils]
    
# 变更记录
changelog:
  - version: '2025.24'
    date: '2025-06-15'
    type: 'major'
    changes:
      - "新增ego_pose通道支持高精度定位"
      - "radar.v2升级到2.0.5版本，修复距离测量精度问题"
      - "保留radar.v1作为fallback，支持版本共存"
      - "样本数量增加到12.5万，覆盖更多场景"
    breaking_changes: []
    
# 下游影响分析
downstream_impact:
  consumers:
    - name: "autonomous_driving"
      impact: "无影响，版本约束范围内"
      action_required: false
    - name: "perception_training"
      impact: "可选择使用新的ego_pose数据"
      action_required: false
      
# 生命周期管理
lifecycle:
  status: active
  support_until: '2025-12-31'
  successor: 'bundle-2025.30'  # 计划的下一个版本
  
# 访问控制
access_control:
  public: false
  authorized_teams: ['e2e-team', 'ad-team', 'perception-team']
  data_classification: 'internal'
